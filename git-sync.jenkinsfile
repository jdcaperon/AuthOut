pipeline {
    agent any
    stages {
        stage('Sync') {
            environment {
                ACCESS_KEY = credentials('UQLOGIN')
            }
            steps {
                sh '''
                git checkout master
                git push --mirror https://s4359540:${ACCESS_KEY}@source.eait.uq.edu.au/git/deco3801-rocketpotatoes
                '''
            }
        }
    }
}